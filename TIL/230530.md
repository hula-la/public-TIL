# 📖 데이터베이스 비교 #10

### 개요

프로젝트를 진행하면서 mySQL, redis 를 사용해봤다. 그래서 RDB, noSQL 의 전반적인 차이점에 대해서는 인지하고 있지만, 여러 RDB / noSQL 간의 차이점과 각각의 장단점에 대해서는 아직 잘 모르는 것 같아 정리하며 공부해보려고 한다. 이전에 대략적으로 공부한 적은 있었지만, 그 당시엔 인사이트가 부족하기도 했기에 개념이 확 와닿진 않았다. DB의 폭이 좁다 보니 프로젝트를 진행할 때도 선택의 한계가 있는 것 같아 공부가 시급해보인다. 이번에야말로 뿌숴보겠다.



### RDBMS

##### 1. Oracle 

- 장점

  - 성능이 뛰어남 (cf. 약 1억개 Insert 시 2~3 시간 소요됨)

  - 여러가지 기능 및 백업 등의 안전성을 갖춤

  - 대부분의 기업에서 사용

- 단점

  - 라이센스가 비쌈

  - 유지보수 비용 비쌈

##### 2. MySQL (MariaDB)

- 장점
  - 오픈소스, 무료

- 단점

  - 속도 및 성능 모두 일반적인 수준은 만족하지만, 복잡한 쿼리에서는 성능이 저하됨

  - 대량 데이터 조회시 성능 저하 발생

  - 대용량 사용시 Data 파일이 깨지면 골치 아픔

##### 3. MsSQL

- 장점

  - 성능이 좋음

  - Hot Backup (운영 중 백업) 자체 기능이 잘 되어 있음

- 단점
  - 비쌈

##### 4. PostgreSQL 

- 장점

  - 무료

  - 신뢰성과 안정성이 높으며 데이터를 대량으로 입력할 때 성능이 매우 뛰어남

  - 인스타그램이나 스카이프와 같은 기업에서도 사용할 정도

- 단점

  - Update 대신 Delete 후 Insert 하도록 되어 있어 업데이트 속도가 조금 저하됨

  - *Disk 사용량이 타 DB보다 많은 편이기에 왠만하면 SSD 환경에서 사용 추천*



### NoSQL

##### 1. Key-Value Store 

- 예시: Redis, DynamoDB 

  이 유형의 NoSQL 데이터베이스는 가장 간단한 형태의 데이터 스토어로 간주되며, 각 키는 값에 직접 연결됩니다. 이 구조는 빠른 읽기/쓰기 작업을 지원하며, **캐싱, 세션 관리, 사용자 설정** 같은 사용 사례에 주로 사용됩니다.

- 장점: 매우 빠른 읽기/쓰기, 간단한 데이터 모델

- 단점: 데이터의 복잡한 관계를 표현하기 어려움

##### 2. Document Store 

- 예시: MongoDB, CouchDB

  문서 저장 데이터베이스는 키-값 데이터베이스를 확장한 것으로, 각 키는 구조화된 문서에 연결됩니다. 대부분 JSON, XML, BSON 등의 형식을 사용하며, 웹 애플리케이션, 카탈로그, 사용자 프로필 관리 등에 주로 사용됩니다.

- 장점: 유연한 스키마, 데이터 중첩 가능, 쿼리 기능 
- 단점: 관계 표현에 한계

##### 3. Column Store 

- 예시: Cassandra, HBase

  컬럼 저장 데이터베이스는 각 키가 여러 컬럼으로 구성된 컬럼 패밀리에 연결됩니다. 이 방식은 읽기/쓰기가 빠르며, 대량의 데이터를 빠르게 분석할 수 있습니다. 빅데이터 분석, 로그 관리, 카운팅 서비스 등에 주로 사용됩니다.

- 장점: 대용량 데이터 처리 용이, 읽기/쓰기 성능 
- 단점: 관계 표현에 한계, 복잡한 쿼리 지원 부족

##### 4. Graph Store 

- 예시: Neo4J, Amazon Neptune 

  그래프 데이터베이스는 엔티티 간의 관계를 효과적으로 표현하기 위해 설계되었습니다. 각 노드는 엔티티를 나타내며 엣지는 이들 사이의 관계를 나타냅니다. 이는 추천 시스템, 네트워크/IT 운영, 사회 네트워크 분석 등에 사용됩니다.

- 장점: 복잡한 관계 표현 용이, 그래프 쿼리 지원 
- 단점: 데이터 일관성 유지 어려움, 대용량 데이터 처리에 제한

> 이전에 부산 풀코스에서 코사인 유사도를 통해 각 여행지의 유사도 점수를 계산하여 redis에 저장했었다. 테이블간의 관계를 나타내는 것도 아니었고 구조의 자유성이 필요했기 때문에 RDB를 사용하지 않았고, noSQL 중에서 그 당시에 사용 경험이 있던 redis를 선택했었다. 하지만 이 경우에도 저장을 할 때, 억지로 저장한 감이 없지 않아 있었다. A라는 여행지에 대한 유사도 점수를 저장하기 위해, A를 key로 이용하여 map 형식의 value를 저장하였고, map 내에서는 나머지 여행지 식별자를 key로 하여 유사도 점수를 value로 저장했다. Graph Store을 보니 이 db가 그 당시에 더 적합했지 않았을까 생각이 든다. 다음에는 참고해보자.

###### 오늘의 팁

- ###### 대용량을 사용할 땐 무조건 SSD (HDD X)



### 결론

이 주제를 선택하게 된 이유는 현재하고 있는 배달 프로젝트를 진행하면서 DB의 다양성에 대해 관심을 가지게 되었기 때문이다. 이 프로젝트에는 가게 검색이라는 기능이 있는데, 배달의 민족의 경우는 가게, 메뉴 등 전체적으로 like '%keyword%' 검색이 가능하다. 하지만 mySQL에서는 우선 like 연산이 인덱스를 타지 않아 성능이 좋지 않고 메뉴 리스트도 join 연산으로 가져와야하기 때문에 쿼리가 복잡해질 것 같았다. 배달의 민족은 어떻게 했을까 궁금해서 기술 블로그를 참조해보니, document-based noSQL 을 사용하는 것 같았다. Document-based noSQL은 어떤 동작방식으로 작동하길래 이 db를 선택했는지 궁금증이 생겼다. 그리고 그 외에 내가 놓친 DB들이 있는지에 대해서도 궁금했다. 따라서 이 주제를 선택하여 앞으로의 프로젝트에서 DB 선택의 폭을 넓히려고 했다. 공부 결과 분명히 이전에 봤던 내용들인데도 약간 성장하고 다시 보니 좀 다르게 와닿는거 같긴하다. 기회가 된다면 하나하나 직접 사용해보고 싶다. 현재 쌓여있는 공부거리들 빨리 해치우고 해봐야지,,
