## 서비스 끼리의 의존성에 관하여

##### 상황

- 서비스가 다른 서비스를 의존하는 경우가 있음
- 그게 괜찮은건지 궁금해서 찾아봄

##### 서칭

- controller에서 다른 서비스를 호출해서 필요 객체를 반환해서 사용하는 방법
  - controller에서 하면 Transactional(영속성 컨텍스트)의 범위를 벗어나서 지연문제가 발생할 수 있음. 현재 프로젝트는 논리적 연관관계로 되어 있기 때문에, 해당 문제는 일어나지 않을 것
  - controller에 비지니스 로직에 대한 역할이 분담될 수 있음.
- service에서 서로를 요청하는 방법
  - DDD의 개념에 따라 상위 개념의 aggregate에 대한 서비스만을 다른 패키지에 오픈하는 것이 좋을까?

=> 결론은 controller까지 entity를 올리기로 했다. 현재 프로젝트에선 요청할 때 여러 엔티티에 대한 필드가 섞이는 일이 없기도 하고, 영속성 컨텍스트에 의한 문제가 발생할 가능성도 없다. msa로의 확장을 생각한다면 entity를 반환하는 것이 여러 컨트롤러에서 공통적으로 사용할 수 있어서 이걸로 결정!

=> 아니다! 다시 생각이 바꼈다,, controller입력받는 값이 entity의 일부라면 오히려 코드 낭비가 생길 수도 있음. 인풋은 DTO, 아웃풋은 엔티티하는 방법을 생각했지만, 통일성이 없으면 유지보수에 좋지 않을 것이라고 판단함. 현재 프로젝트에서는 서비스끼리의 연결을 위한 메서드 종류가 많지 않고, 

>#### 대부분의 문제에 대해서 무조건적인 답은 없다. Why에 대해 타인을 설득할 수 있을만한 확실한 근거만 있다면 그것이 정답이다.

#### 

