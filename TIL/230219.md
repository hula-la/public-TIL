# 0219

## 비정규화를 통한 성능개선에 대한 고민

##### 상황

- 가게 테이블과 가게 메뉴 테이블이 있음
- A 가게의 메뉴들을 읽을 때 두 테이블을 join 해서 보면 성능이 안 좋을 거라고 생각
- 가게 테이블에 [1,2,3] 과 같이 가게 메뉴 테이블의 id를 리스트로 따로 저장해두면, for문을 돌면서 가게 메뉴 테이블에서 PK 검색을 할 수 있어서 성능이 좋지 않을까? 고민 함

##### 배운 점

- 인덱스는 무조건 unique 해야 한다고 착각했음
- 가게 id를 가게 메뉴 테이블에서 인덱스로 설정해두면 서칭할 때 N*log2M 정도의 시간복잡도를 가질 것이라고 생각함
- for문을 도는 방법도 비슷한 시간 복잡도를 가지기 때문에, 좀 더 유지보수가 좋은 인덱스 설정이 나을 것으로 보임
- 기본 인덱스나 유니크 인덱스나 성능은 거의 비슷하고, 오히려 유니크 인덱스가 정합성 체크때문에 안좋다고함.

