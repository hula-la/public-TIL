# 🤔 ❓메모리 누수 탐지 #8

### 개요

면접에서 gc 튜닝에 대해서 여쭤보셨다. 꼬리 질문이 이어지다가 gc 튜닝을 어떻게 할거냐는 질문을 하셨다. 먼저 확실히 알고 있던 방법인 gc 알고리즘 변경은 자신있게 말했지만, 두 번째로 말한 메모리 누수를 줄이는 법으로는 메모리 누수를 모니터링할 수 있는 툴을 이용해서 누수를 줄일 것이다라고 얼버무리면서 답변하였다. 그 때, 면접관님이 메모리 누수를 모니터링하는게 있어요? 라고 질문 하셨는데, 그 때 나의 밑천이 드러났다..ㅎ 배달의 민족 기술블로그에서 메모리 누수 관련 포스팅이 봤던게 기억나서 그렇게 답변을 했던건데, 그건 메모리 누수가 아니라 gc 대상이 된 객체들이었던건가 하는 의문이 들면서 또 횡설수설하면서 누수를 보는게 아니고 gc 대상이 된 객체들을 보는거인거 같다고 말씀드렸다. 궁금해서 찾아보니, 메모리 누수가 맞았당,,, heapdump를 내보낸 다음 이클립스의 mat (memory analyzer tool) 로 분석하는거였다. 그래서 직접 사용해보면서 내 것으로 만들어보려고 한다~



### 1. 메모리 덤프 획득

```bash
# 1. 스프링 어플리케이션의 프로세스 아이디 조회
> jps
1234 MonolithicApplication

# 2. jmap을 이용한 메모리 덤프 획득
> jmap -dump:format=b,file=heap.hprof [process ID]
```

### 2. Eclipse MAT을 이용한 분석

https://www.eclipse.org/mat/

 